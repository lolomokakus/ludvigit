#!/usr/bin/env bash

DEPS="translate-shell"

for dep in $DEPS ; do
  if [[ ! -e `which $dep` ]] ; then
    echo "Missing dependency: $dep"
  fi
done

LANGUAGES=(da de el es fi fr is it ja ko nl no pl ru sv zh-CN)

STRING="$1"

for pass in {1..25} ; do
  selectedLanguage=$(($RANDOM % ${#LANGUAGES[@]} - 1))
  if [[ $pass == 1 ]] ; then
    STRING=`trans -b en:${LANGUAGES[$selectedLanguage]} "$STRING"`
  elif [[ $pass == 25 ]] ; then
    STRING=`trans -b ${LANGUAGES[$previousLanguage]}:en "$STRING"`
  else
    STRING=`trans -b ${LANGUAGES[$previousLanguage]}:${LANGUAGES[$selectedLanguage]} "$STRING"`
  fi
  previousLanguage=$selectedLanguage
done

echo "$STRING"
exit 0
